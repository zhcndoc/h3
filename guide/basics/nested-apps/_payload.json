[{"data":1,"prerenderedAt":690},["ShallowReactive",2],{"navigation":3,"-guide-basics-nested-apps":185,"-guide-basics-nested-apps-surround":685},[4,91,133,161,168],{"title":5,"path":6,"stem":7,"children":8,"icon":90},"Guide","/guide","1.guide/0.index",[9,12,53,69],{"title":10,"path":6,"stem":7,"icon":11},"入门指南","pixel:play",{"title":5,"icon":13,"path":14,"stem":15,"children":16,"page":52},"ph:book-open-duotone","/guide/basics","1.guide/1.basics",[17,22,27,32,37,42,47],{"title":18,"path":19,"stem":20,"icon":21},"请求生命周期","/guide/basics/lifecycle","1.guide/1.basics/1.lifecycle","icon-park-outline:handle-round",{"title":23,"path":24,"stem":25,"icon":26},"路由","/guide/basics/routing","1.guide/1.basics/2.routing","solar:routing-bold",{"title":28,"path":29,"stem":30,"icon":31},"中间件","/guide/basics/middleware","1.guide/1.basics/3.middleware","mdi:middleware-outline",{"title":33,"path":34,"stem":35,"icon":36},"事件处理器","/guide/basics/handler","1.guide/1.basics/4.handler","mdi:function",{"title":38,"path":39,"stem":40,"icon":41},"发送响应","/guide/basics/response","1.guide/1.basics/5.response","tabler:json",{"title":43,"path":44,"stem":45,"icon":46},"错误处理","/guide/basics/error","1.guide/1.basics/6.error","tabler:error-404",{"title":48,"path":49,"stem":50,"icon":51},"嵌套应用","/guide/basics/nested-apps","1.guide/1.basics/7.nested-apps","material-symbols-light:layers-outline",false,{"title":54,"icon":55,"path":56,"stem":57,"children":58,"page":52},"API","material-symbols-light:api-rounded","/guide/api","1.guide/900.api",[59,64],{"title":60,"path":61,"stem":62,"icon":63},"H3","/guide/api/h3","1.guide/900.api/1.h3","material-symbols:bolt-rounded",{"title":65,"path":66,"stem":67,"icon":68},"H3Event","/guide/api/h3event","1.guide/900.api/2.h3event","material-symbols:data-object-rounded",{"title":70,"icon":71,"path":72,"stem":73,"children":74,"page":52},"Advanced","hugeicons:more-01","/guide/advanced","1.guide/901.advanced",[75,80,85],{"title":76,"path":77,"stem":78,"icon":79},"Plugins","/guide/advanced/plugins","1.guide/901.advanced/1.plugins","clarity:plugin-line",{"title":81,"path":82,"stem":83,"icon":84},"WebSockets","/guide/advanced/websocket","1.guide/901.advanced/2.websocket","hugeicons:live-streaming-02",{"title":86,"path":87,"stem":88,"icon":89},"每夜构建","/guide/advanced/nightly","1.guide/901.advanced/9.nightly","game-icons:barn-owl","i-ph:book-open-duotone",{"title":92,"path":93,"stem":94,"children":95,"icon":97},"H3 工具集","/utils","2.utils/0.index",[96,98,103,108,113,118,123,128],{"title":92,"path":93,"stem":94,"icon":97},"ph:function-bold",{"title":99,"path":100,"stem":101,"icon":102},"请求","/utils/request","2.utils/1.request","material-symbols-light:input",{"title":104,"path":105,"stem":106,"icon":107},"响应","/utils/response","2.utils/2.response","material-symbols-light:output",{"title":109,"path":110,"stem":111,"icon":112},"Cookie","/utils/cookie","2.utils/3.cookie","material-symbols:cookie-outline",{"title":114,"path":115,"stem":116,"icon":117},"安全","/utils/security","2.utils/4.security","wpf:key-security",{"title":119,"path":120,"stem":121,"icon":122},"代理","/utils/proxy","2.utils/5.proxy","arcticons:super-proxy",{"title":124,"path":125,"stem":126,"icon":127},"更多工具","/utils/more","2.utils/9.more","mingcute:plus-line",{"title":129,"path":130,"stem":131,"icon":132},"社区","/utils/community","2.utils/99.community","lets-icons:external",{"title":134,"path":135,"stem":136,"children":137,"icon":139},"示例","/examples","4.examples/0.index",[138,140,145,149,153,157],{"title":134,"path":135,"stem":136,"icon":139},"ph:code",{"title":141,"path":142,"stem":143,"icon":144},"Cookies","/examples/handle-cookie","4.examples/handle-cookie","ph:arrow-right",{"title":146,"path":147,"stem":148,"icon":144},"会话","/examples/handle-session","4.examples/handle-session",{"title":150,"path":151,"stem":152,"icon":144},"静态资源","/examples/serve-static-assets","4.examples/serve-static-assets",{"title":154,"path":155,"stem":156,"icon":144},"流式响应","/examples/stream-response","4.examples/stream-response",{"title":158,"path":159,"stem":160,"icon":144},"验证数据","/examples/validate-data","4.examples/validate-data",{"title":162,"path":163,"stem":164,"children":165,"icon":167},"从 v1 到 v2 的迁移指南","/migration","5.migration/0.index",[166],{"title":162,"path":163,"stem":164,"icon":167},"icons8:up-round",{"title":169,"path":170,"stem":171,"children":172},"Blog","/blog","99.blog",[173,177,181],{"title":174,"path":170,"stem":175,"icon":176},"博客","99.blog/index","i-lucide-file-text",{"title":178,"path":179,"stem":180,"icon":176},"H3 1.8 - 迈向 Web 的边缘","/blog/v1.8","99.blog/1.v1.8",{"title":182,"path":183,"stem":184,"icon":176},"H3 v2 测试版","/blog/v2-beta","99.blog/2.v2-beta",{"id":186,"title":48,"body":187,"description":679,"extension":680,"meta":681,"navigation":682,"path":49,"seo":683,"stem":50,"__hash__":684},"content/1.guide/1.basics/7.nested-apps.md",{"type":188,"value":189,"toc":675,"icon":51},"minimark",[190,203,217,222,230,423,444,450,454,474,483,656,671],[191,192,193,194,197,198,202],"p",{},"通常，H3 项目由一个或多个文件中定义的多个",[195,196,33],"a",{"href":34},"组成（甚至可以",[195,199,201],{"href":200},"/guide/basics/handler#lazy-handlers","懒加载","，以加快启动速度）。",[191,204,205,206,209,210,216],{},"有时将多个 ",[207,208,60],"code",{}," 实例结合起来，或者使用其他团队使用的 HTTP 框架并将其挂载到主应用实例，会更加方便。H3 提供了一个原生的 ",[195,211,213],{"href":212},"/guide/api/h3#h3mount",[207,214,215],{},".mount"," 方法来实现这一点。",[218,219,221],"h2",{"id":220},"嵌套的-h3-应用","嵌套的 H3 应用",[191,223,224,225,229],{},"H3 原生支持挂载子应用。挂载后，子应用的路由和中间件会与基础 URL 前缀",[226,227,228],"strong",{},"合并","到主应用实例中。",[231,232,237],"pre",{"className":233,"code":234,"language":235,"meta":236,"style":236},"language-js shiki shiki-themes github-light github-dark github-dark","import { H3, serve } from \"h3\";\n\nconst nestedApp = new H3()\n  .use((event) => {\n    event.res.headers.set(\"x-api\", \"1\");\n  })\n  .get(\"/**:slug\", (event) => ({\n    pathname: event.url.pathname,\n    slug: event.context.params?.slug,\n  }));\n\nconst app = new H3().mount(\"/api\", nestedApp);\n","js","",[207,238,239,262,269,292,317,341,347,372,378,384,390,395],{"__ignoreMap":236},[240,241,244,248,252,255,259],"span",{"class":242,"line":243},"line",1,[240,245,247],{"class":246},"so5gQ","import",[240,249,251],{"class":250},"slsVL"," { H3, serve } ",[240,253,254],{"class":246},"from",[240,256,258],{"class":257},"sfrk1"," \"h3\"",[240,260,261],{"class":250},";\n",[240,263,265],{"class":242,"line":264},2,[240,266,268],{"emptyLinePlaceholder":267},true,"\n",[240,270,272,275,279,282,285,289],{"class":242,"line":271},3,[240,273,274],{"class":246},"const",[240,276,278],{"class":277},"suiK_"," nestedApp",[240,280,281],{"class":246}," =",[240,283,284],{"class":246}," new",[240,286,288],{"class":287},"shcOC"," H3",[240,290,291],{"class":250},"()\n",[240,293,295,298,301,304,308,311,314],{"class":242,"line":294},4,[240,296,297],{"class":250},"  .",[240,299,300],{"class":287},"use",[240,302,303],{"class":250},"((",[240,305,307],{"class":306},"sQHwn","event",[240,309,310],{"class":250},") ",[240,312,313],{"class":246},"=>",[240,315,316],{"class":250}," {\n",[240,318,320,323,326,329,332,335,338],{"class":242,"line":319},5,[240,321,322],{"class":250},"    event.res.headers.",[240,324,325],{"class":287},"set",[240,327,328],{"class":250},"(",[240,330,331],{"class":257},"\"x-api\"",[240,333,334],{"class":250},", ",[240,336,337],{"class":257},"\"1\"",[240,339,340],{"class":250},");\n",[240,342,344],{"class":242,"line":343},6,[240,345,346],{"class":250},"  })\n",[240,348,350,352,355,357,360,363,365,367,369],{"class":242,"line":349},7,[240,351,297],{"class":250},[240,353,354],{"class":287},"get",[240,356,328],{"class":250},[240,358,359],{"class":257},"\"/**:slug\"",[240,361,362],{"class":250},", (",[240,364,307],{"class":306},[240,366,310],{"class":250},[240,368,313],{"class":246},[240,370,371],{"class":250}," ({\n",[240,373,375],{"class":242,"line":374},8,[240,376,377],{"class":250},"    pathname: event.url.pathname,\n",[240,379,381],{"class":242,"line":380},9,[240,382,383],{"class":250},"    slug: event.context.params?.slug,\n",[240,385,387],{"class":242,"line":386},10,[240,388,389],{"class":250},"  }));\n",[240,391,393],{"class":242,"line":392},11,[240,394,268],{"emptyLinePlaceholder":267},[240,396,398,400,403,405,407,409,412,415,417,420],{"class":242,"line":397},12,[240,399,274],{"class":246},[240,401,402],{"class":277}," app",[240,404,281],{"class":246},[240,406,284],{"class":246},[240,408,288],{"class":287},[240,410,411],{"class":250},"().",[240,413,414],{"class":287},"mount",[240,416,328],{"class":250},[240,418,419],{"class":257},"\"/api\"",[240,421,422],{"class":250},", nestedApp);\n",[191,424,425,426,429,430,433,434,436,437,433,440,443],{},"在上例中，当访问 ",[207,427,428],{},"/api/test"," URL 时，",[207,431,432],{},"pathname"," 将是 ",[207,435,428],{},"（实际路径），而 ",[207,438,439],{},"slug",[207,441,442],{},"/test","（通配符参数）。",[445,446,447],"note",{},[191,448,449],{},"\n全局配置和钩子不会从嵌套应用中继承。请考虑始终从主应用中设置它们。",[218,451,453],{"id":452},"嵌套的-web-标准应用","嵌套的 Web 标准应用",[191,455,456,457,460,461,467,468,473],{},"将一个兼容 ",[207,458,459],{},".fetch"," 的服务器实例（例如 ",[195,462,466],{"href":463,"rel":464},"https://hono.dev/",[465],"nofollow","Hono"," 或 ",[195,469,472],{"href":470,"rel":471},"https://elysiajs.com/",[465],"Elysia","）挂载到基础 URL 下。",[445,475,476],{},[191,477,478,479,482],{},"\n传递给被挂载应用的 ",[207,480,481],{},"request.url"," 会移除基础前缀。",[231,484,486],{"className":233,"code":485,"language":235,"meta":236,"style":236},"import { H3 } from \"h3\";\nimport { Hono } from \"hono\";\nimport { Elysia } from \"elysia\";\n\nconst app = new H3()\n  .mount(\n    \"/elysia\",\n    new Elysia().get(\"/test\", () => \"Hello Elysia!\"),\n  )\n  .mount(\n    \"/hono\",\n    new Hono().get(\"/test\", (c) => c.text(\"Hello Hono!\")),\n  );\n",[207,487,488,501,515,529,533,547,556,564,592,597,605,612,650],{"__ignoreMap":236},[240,489,490,492,495,497,499],{"class":242,"line":243},[240,491,247],{"class":246},[240,493,494],{"class":250}," { H3 } ",[240,496,254],{"class":246},[240,498,258],{"class":257},[240,500,261],{"class":250},[240,502,503,505,508,510,513],{"class":242,"line":264},[240,504,247],{"class":246},[240,506,507],{"class":250}," { Hono } ",[240,509,254],{"class":246},[240,511,512],{"class":257}," \"hono\"",[240,514,261],{"class":250},[240,516,517,519,522,524,527],{"class":242,"line":271},[240,518,247],{"class":246},[240,520,521],{"class":250}," { Elysia } ",[240,523,254],{"class":246},[240,525,526],{"class":257}," \"elysia\"",[240,528,261],{"class":250},[240,530,531],{"class":242,"line":294},[240,532,268],{"emptyLinePlaceholder":267},[240,534,535,537,539,541,543,545],{"class":242,"line":319},[240,536,274],{"class":246},[240,538,402],{"class":277},[240,540,281],{"class":246},[240,542,284],{"class":246},[240,544,288],{"class":287},[240,546,291],{"class":250},[240,548,549,551,553],{"class":242,"line":343},[240,550,297],{"class":250},[240,552,414],{"class":287},[240,554,555],{"class":250},"(\n",[240,557,558,561],{"class":242,"line":349},[240,559,560],{"class":257},"    \"/elysia\"",[240,562,563],{"class":250},",\n",[240,565,566,569,572,574,576,578,581,584,586,589],{"class":242,"line":374},[240,567,568],{"class":246},"    new",[240,570,571],{"class":287}," Elysia",[240,573,411],{"class":250},[240,575,354],{"class":287},[240,577,328],{"class":250},[240,579,580],{"class":257},"\"/test\"",[240,582,583],{"class":250},", () ",[240,585,313],{"class":246},[240,587,588],{"class":257}," \"Hello Elysia!\"",[240,590,591],{"class":250},"),\n",[240,593,594],{"class":242,"line":380},[240,595,596],{"class":250},"  )\n",[240,598,599,601,603],{"class":242,"line":386},[240,600,297],{"class":250},[240,602,414],{"class":287},[240,604,555],{"class":250},[240,606,607,610],{"class":242,"line":392},[240,608,609],{"class":257},"    \"/hono\"",[240,611,563],{"class":250},[240,613,614,616,619,621,623,625,627,629,632,634,636,639,642,644,647],{"class":242,"line":397},[240,615,568],{"class":246},[240,617,618],{"class":287}," Hono",[240,620,411],{"class":250},[240,622,354],{"class":287},[240,624,328],{"class":250},[240,626,580],{"class":257},[240,628,362],{"class":250},[240,630,631],{"class":306},"c",[240,633,310],{"class":250},[240,635,313],{"class":246},[240,637,638],{"class":250}," c.",[240,640,641],{"class":287},"text",[240,643,328],{"class":250},[240,645,646],{"class":257},"\"Hello Hono!\"",[240,648,649],{"class":250},")),\n",[240,651,653],{"class":242,"line":652},13,[240,654,655],{"class":250},"  );\n",[657,658,659],"tip",{},[191,660,661,662,467,666,670],{},"\n类似地，你可以在 ",[195,663,466],{"href":664,"rel":665},"https://hono.dev/docs/api/hono#mount",[465],[195,667,472],{"href":668,"rel":669},"https://elysiajs.com/patterns/mount#mount-1",[465]," 中挂载 H3 应用。",[672,673,674],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":236,"searchDepth":264,"depth":264,"links":676},[677,678],{"id":220,"depth":264,"text":221},{"id":452,"depth":264,"text":453},"H3 具有一个原生的 mount 方法，用于将嵌套的子应用添加到主实例中。","md",{"icon":51},{"icon":51},{"title":48,"description":679},"ACFx8hER5LYPoalXO58MKP4gf1LL_RurIgTFQBmICA8",[686,688],{"title":43,"path":44,"stem":45,"description":687,"icon":46,"children":-1},"通过抛出 HTTPError 来发送错误。",{"title":60,"path":61,"stem":62,"description":689,"icon":63,"children":-1},"H3 类是服务器的核心。",1762531025119]