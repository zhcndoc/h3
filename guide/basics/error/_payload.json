[{"data":1,"prerenderedAt":913},["ShallowReactive",2],{"navigation":3,"-guide-basics-error":185,"-guide-basics-error-surround":908},[4,91,133,161,168],{"title":5,"path":6,"stem":7,"children":8,"icon":90},"Guide","/guide","1.guide/0.index",[9,12,53,69],{"title":10,"path":6,"stem":7,"icon":11},"入门指南","pixel:play",{"title":5,"icon":13,"path":14,"stem":15,"children":16,"page":52},"ph:book-open-duotone","/guide/basics","1.guide/1.basics",[17,22,27,32,37,42,47],{"title":18,"path":19,"stem":20,"icon":21},"请求生命周期","/guide/basics/lifecycle","1.guide/1.basics/1.lifecycle","icon-park-outline:handle-round",{"title":23,"path":24,"stem":25,"icon":26},"路由","/guide/basics/routing","1.guide/1.basics/2.routing","solar:routing-bold",{"title":28,"path":29,"stem":30,"icon":31},"中间件","/guide/basics/middleware","1.guide/1.basics/3.middleware","mdi:middleware-outline",{"title":33,"path":34,"stem":35,"icon":36},"事件处理器","/guide/basics/handler","1.guide/1.basics/4.handler","mdi:function",{"title":38,"path":39,"stem":40,"icon":41},"发送响应","/guide/basics/response","1.guide/1.basics/5.response","tabler:json",{"title":43,"path":44,"stem":45,"icon":46},"错误处理","/guide/basics/error","1.guide/1.basics/6.error","tabler:error-404",{"title":48,"path":49,"stem":50,"icon":51},"嵌套应用","/guide/basics/nested-apps","1.guide/1.basics/7.nested-apps","material-symbols-light:layers-outline",false,{"title":54,"icon":55,"path":56,"stem":57,"children":58,"page":52},"API","material-symbols-light:api-rounded","/guide/api","1.guide/900.api",[59,64],{"title":60,"path":61,"stem":62,"icon":63},"H3","/guide/api/h3","1.guide/900.api/1.h3","material-symbols:bolt-rounded",{"title":65,"path":66,"stem":67,"icon":68},"H3Event","/guide/api/h3event","1.guide/900.api/2.h3event","material-symbols:data-object-rounded",{"title":70,"icon":71,"path":72,"stem":73,"children":74,"page":52},"Advanced","hugeicons:more-01","/guide/advanced","1.guide/901.advanced",[75,80,85],{"title":76,"path":77,"stem":78,"icon":79},"Plugins","/guide/advanced/plugins","1.guide/901.advanced/1.plugins","clarity:plugin-line",{"title":81,"path":82,"stem":83,"icon":84},"WebSockets","/guide/advanced/websocket","1.guide/901.advanced/2.websocket","hugeicons:live-streaming-02",{"title":86,"path":87,"stem":88,"icon":89},"每夜构建","/guide/advanced/nightly","1.guide/901.advanced/9.nightly","game-icons:barn-owl","i-ph:book-open-duotone",{"title":92,"path":93,"stem":94,"children":95,"icon":97},"H3 工具集","/utils","2.utils/0.index",[96,98,103,108,113,118,123,128],{"title":92,"path":93,"stem":94,"icon":97},"ph:function-bold",{"title":99,"path":100,"stem":101,"icon":102},"请求","/utils/request","2.utils/1.request","material-symbols-light:input",{"title":104,"path":105,"stem":106,"icon":107},"响应","/utils/response","2.utils/2.response","material-symbols-light:output",{"title":109,"path":110,"stem":111,"icon":112},"Cookie","/utils/cookie","2.utils/3.cookie","material-symbols:cookie-outline",{"title":114,"path":115,"stem":116,"icon":117},"安全","/utils/security","2.utils/4.security","wpf:key-security",{"title":119,"path":120,"stem":121,"icon":122},"代理","/utils/proxy","2.utils/5.proxy","arcticons:super-proxy",{"title":124,"path":125,"stem":126,"icon":127},"更多工具","/utils/more","2.utils/9.more","mingcute:plus-line",{"title":129,"path":130,"stem":131,"icon":132},"社区","/utils/community","2.utils/99.community","lets-icons:external",{"title":134,"path":135,"stem":136,"children":137,"icon":139},"示例","/examples","4.examples/0.index",[138,140,145,149,153,157],{"title":134,"path":135,"stem":136,"icon":139},"ph:code",{"title":141,"path":142,"stem":143,"icon":144},"Cookies","/examples/handle-cookie","4.examples/handle-cookie","ph:arrow-right",{"title":146,"path":147,"stem":148,"icon":144},"会话","/examples/handle-session","4.examples/handle-session",{"title":150,"path":151,"stem":152,"icon":144},"静态资源","/examples/serve-static-assets","4.examples/serve-static-assets",{"title":154,"path":155,"stem":156,"icon":144},"流式响应","/examples/stream-response","4.examples/stream-response",{"title":158,"path":159,"stem":160,"icon":144},"验证数据","/examples/validate-data","4.examples/validate-data",{"title":162,"path":163,"stem":164,"children":165,"icon":167},"从 v1 到 v2 的迁移指南","/migration","5.migration/0.index",[166],{"title":162,"path":163,"stem":164,"icon":167},"icons8:up-round",{"title":169,"path":170,"stem":171,"children":172,"page":-1},"Blog","/blog","99.blog",[173,177,181],{"title":174,"path":170,"stem":175,"icon":176},"博客","99.blog/index","i-lucide-file-text",{"title":178,"path":179,"stem":180,"icon":176},"H3 1.8 - 迈向 Web 的边缘","/blog/v1.8","99.blog/1.v1.8",{"title":182,"path":183,"stem":184,"icon":176},"H3 v2 测试版","/blog/v2-beta","99.blog/2.v2-beta",{"id":186,"title":43,"body":187,"description":902,"extension":903,"meta":904,"navigation":905,"path":44,"seo":906,"stem":45,"__hash__":907},"content/1.guide/1.basics/6.error.md",{"type":188,"value":189,"toc":894,"icon":46},"minimark",[190,198,206,212,457,464,550,557,615,627,629,638,688,706,709,719,800,809,882,890],[191,192,193,194,197],"p",{},"H3 捕获在",[195,196,18],"a",{"href":19},"中所有可能的错误。",[199,200,202],"h2",{"id":201},"httperror",[203,204,205],"code",{},"HTTPError",[191,207,208,209,211],{},"你可以使用不同的语法创建并抛出 HTTP 错误，使用 ",[203,210,205],{},"。",[213,214,219],"pre",{"className":215,"code":216,"language":217,"meta":218,"style":218},"language-js shiki shiki-themes github-light github-dark github-dark","import { HTTPError } from \"h3\";\n\napp.get(\"/error\", (event) => {\n  // 使用 message 和 details\n  throw new HTTPError(\"无效的用户输入\", { status: 400 });\n\n  // 使用 HTTPError.status(code)\n  throw HTTPError.status(400, \"错误的请求\");\n\n  // 使用单个对象\n  throw new HTTPError({\n    status: 400,\n    statusText: \"错误的请求\",\n    message: \"无效的用户输入\",\n    data: { field: \"email\" },\n    body: { date: new Date().toJSON() },\n    headers: {},\n  });\n});\n","js","",[203,220,221,244,251,283,290,317,322,328,352,357,363,375,386,396,406,418,439,445,451],{"__ignoreMap":218},[222,223,226,230,234,237,241],"span",{"class":224,"line":225},"line",1,[222,227,229],{"class":228},"so5gQ","import",[222,231,233],{"class":232},"slsVL"," { HTTPError } ",[222,235,236],{"class":228},"from",[222,238,240],{"class":239},"sfrk1"," \"h3\"",[222,242,243],{"class":232},";\n",[222,245,247],{"class":224,"line":246},2,[222,248,250],{"emptyLinePlaceholder":249},true,"\n",[222,252,254,257,261,264,267,270,274,277,280],{"class":224,"line":253},3,[222,255,256],{"class":232},"app.",[222,258,260],{"class":259},"shcOC","get",[222,262,263],{"class":232},"(",[222,265,266],{"class":239},"\"/error\"",[222,268,269],{"class":232},", (",[222,271,273],{"class":272},"sQHwn","event",[222,275,276],{"class":232},") ",[222,278,279],{"class":228},"=>",[222,281,282],{"class":232}," {\n",[222,284,286],{"class":224,"line":285},4,[222,287,289],{"class":288},"sCsY4","  // 使用 message 和 details\n",[222,291,293,296,299,302,304,307,310,314],{"class":224,"line":292},5,[222,294,295],{"class":228},"  throw",[222,297,298],{"class":228}," new",[222,300,301],{"class":259}," HTTPError",[222,303,263],{"class":232},[222,305,306],{"class":239},"\"无效的用户输入\"",[222,308,309],{"class":232},", { status: ",[222,311,313],{"class":312},"suiK_","400",[222,315,316],{"class":232}," });\n",[222,318,320],{"class":224,"line":319},6,[222,321,250],{"emptyLinePlaceholder":249},[222,323,325],{"class":224,"line":324},7,[222,326,327],{"class":288},"  // 使用 HTTPError.status(code)\n",[222,329,331,333,336,339,341,343,346,349],{"class":224,"line":330},8,[222,332,295],{"class":228},[222,334,335],{"class":232}," HTTPError.",[222,337,338],{"class":259},"status",[222,340,263],{"class":232},[222,342,313],{"class":312},[222,344,345],{"class":232},", ",[222,347,348],{"class":239},"\"错误的请求\"",[222,350,351],{"class":232},");\n",[222,353,355],{"class":224,"line":354},9,[222,356,250],{"emptyLinePlaceholder":249},[222,358,360],{"class":224,"line":359},10,[222,361,362],{"class":288},"  // 使用单个对象\n",[222,364,366,368,370,372],{"class":224,"line":365},11,[222,367,295],{"class":228},[222,369,298],{"class":228},[222,371,301],{"class":259},[222,373,374],{"class":232},"({\n",[222,376,378,381,383],{"class":224,"line":377},12,[222,379,380],{"class":232},"    status: ",[222,382,313],{"class":312},[222,384,385],{"class":232},",\n",[222,387,389,392,394],{"class":224,"line":388},13,[222,390,391],{"class":232},"    statusText: ",[222,393,348],{"class":239},[222,395,385],{"class":232},[222,397,399,402,404],{"class":224,"line":398},14,[222,400,401],{"class":232},"    message: ",[222,403,306],{"class":239},[222,405,385],{"class":232},[222,407,409,412,415],{"class":224,"line":408},15,[222,410,411],{"class":232},"    data: { field: ",[222,413,414],{"class":239},"\"email\"",[222,416,417],{"class":232}," },\n",[222,419,421,424,427,430,433,436],{"class":224,"line":420},16,[222,422,423],{"class":232},"    body: { date: ",[222,425,426],{"class":228},"new",[222,428,429],{"class":259}," Date",[222,431,432],{"class":232},"().",[222,434,435],{"class":259},"toJSON",[222,437,438],{"class":232},"() },\n",[222,440,442],{"class":224,"line":441},17,[222,443,444],{"class":232},"    headers: {},\n",[222,446,448],{"class":224,"line":447},18,[222,449,450],{"class":232},"  });\n",[222,452,454],{"class":224,"line":453},19,[222,455,456],{"class":232},"});\n",[191,458,459,460,463],{},"这将以 ",[203,461,462],{},"400 - 错误的请求"," 状态码结束请求，并返回以下 JSON 响应：",[213,465,469],{"className":466,"code":467,"language":468,"meta":218,"style":218},"language-json shiki shiki-themes github-light github-dark github-dark","{\n  \"date\": \"2025-06-05T04:20:00.0Z\",\n  \"status\": 400,\n  \"statusText\": \"错误的请求\",\n  \"message\": \"无效的用户输入\",\n  \"data\": {\n    \"field\": \"email\"\n  }\n}\n","json",[203,470,471,476,489,500,511,522,530,540,545],{"__ignoreMap":218},[222,472,473],{"class":224,"line":225},[222,474,475],{"class":232},"{\n",[222,477,478,481,484,487],{"class":224,"line":246},[222,479,480],{"class":312},"  \"date\"",[222,482,483],{"class":232},": ",[222,485,486],{"class":239},"\"2025-06-05T04:20:00.0Z\"",[222,488,385],{"class":232},[222,490,491,494,496,498],{"class":224,"line":253},[222,492,493],{"class":312},"  \"status\"",[222,495,483],{"class":232},[222,497,313],{"class":312},[222,499,385],{"class":232},[222,501,502,505,507,509],{"class":224,"line":285},[222,503,504],{"class":312},"  \"statusText\"",[222,506,483],{"class":232},[222,508,348],{"class":239},[222,510,385],{"class":232},[222,512,513,516,518,520],{"class":224,"line":292},[222,514,515],{"class":312},"  \"message\"",[222,517,483],{"class":232},[222,519,306],{"class":239},[222,521,385],{"class":232},[222,523,524,527],{"class":224,"line":319},[222,525,526],{"class":312},"  \"data\"",[222,528,529],{"class":232},": {\n",[222,531,532,535,537],{"class":224,"line":324},[222,533,534],{"class":312},"    \"field\"",[222,536,483],{"class":232},[222,538,539],{"class":239},"\"email\"\n",[222,541,542],{"class":224,"line":330},[222,543,544],{"class":232},"  }\n",[222,546,547],{"class":224,"line":354},[222,548,549],{"class":232},"}\n",[551,552,554,556],"h3",{"id":553},"httperror-字段",[203,555,205],{}," 字段",[558,559,560,566,572,578,587,593,599,605],"ul",{},[561,562,563,565],"li",{},[203,564,338],{},"：HTTP 状态码，范围在 200–599 之间。",[561,567,568,571],{},[203,569,570],{},"statusText","：要在响应头中发送的 HTTP 状态文本。",[561,573,574,577],{},[203,575,576],{},"message","：要包含在 JSON 正文中的错误消息。",[561,579,580,583,584,586],{},[203,581,582],{},"data","：附加数据，将附加在错误 JSON 正文的 ",[203,585,582],{}," 键下。",[561,588,589,592],{},[203,590,591],{},"body","：附加的顶级属性，将附加在错误 JSON 正文中。",[561,594,595,598],{},[203,596,597],{},"headers","：错误响应中要发送的额外 HTTP 头。",[561,600,601,604],{},[203,602,603],{},"cause","：导致此错误的原始错误对象，便于追踪和调试。",[561,606,607,610,611,211],{},[203,608,609],{},"unhandled","：指示错误是否因未知原因被抛出。详见 ",[195,612,614],{"href":613},"#unhandled-errors","未处理的错误",[616,617,618],"important",{},[191,619,620,621,623,624,626],{},"\n错误的 ",[203,622,570],{}," 应简短（最多 512 至 1024 字符），且只包含制表符、空格、可见 ASCII 字符和扩展字符（字节值 128–255）。建议使用 JSON 正文中的 ",[203,625,576],{}," 来扩展错误信息。",[199,628,614],{"id":614},[191,630,631,632,634,635,637],{},"在调用",[195,633,18],{"href":19},"时，任何未使用 ",[203,636,205],{}," 抛出的错误都会被视为_未处理_的错误。",[213,639,641],{"className":215,"code":640,"language":217,"meta":218,"style":218},"app.get(\"/error\", (event) => {\n  // 这将导致未处理的错误。\n  throw new Error(\"出了点问题\");\n});\n",[203,642,643,663,668,684],{"__ignoreMap":218},[222,644,645,647,649,651,653,655,657,659,661],{"class":224,"line":225},[222,646,256],{"class":232},[222,648,260],{"class":259},[222,650,263],{"class":232},[222,652,266],{"class":239},[222,654,269],{"class":232},[222,656,273],{"class":272},[222,658,276],{"class":232},[222,660,279],{"class":228},[222,662,282],{"class":232},[222,664,665],{"class":224,"line":246},[222,666,667],{"class":288},"  // 这将导致未处理的错误。\n",[222,669,670,672,674,677,679,682],{"class":224,"line":253},[222,671,295],{"class":228},[222,673,298],{"class":228},[222,675,676],{"class":259}," Error",[222,678,263],{"class":232},[222,680,681],{"class":239},"\"出了点问题\"",[222,683,351],{"class":232},[222,685,686],{"class":224,"line":285},[222,687,456],{"class":232},[689,690,691],"tip",{},[191,692,693,694,696,697,696,699,702,703,705],{},"\n为了增强安全性，H3 会在 JSON 响应中隐藏未处理错误的某些字段（",[203,695,582],{},"、",[203,698,591],{},[203,700,701],{},"stack"," 和 ",[203,704,576],{},"）。",[199,707,708],{"id":708},"捕获错误",[191,710,711,712,718],{},"使用全局 ",[195,713,715],{"href":714},"/guide/api/h3#global-hooks",[203,716,717],{},"onError"," 钩子：",[213,720,722],{"className":215,"code":721,"language":217,"meta":218,"style":218},"import { H3, onError } from \"h3\";\n\n// 全局处理错误\nconst app = new H3({\n  onError: (error) => {\n    console.error(error);\n  },\n});\n",[203,723,724,737,741,746,764,781,791,796],{"__ignoreMap":218},[222,725,726,728,731,733,735],{"class":224,"line":225},[222,727,229],{"class":228},[222,729,730],{"class":232}," { H3, onError } ",[222,732,236],{"class":228},[222,734,240],{"class":239},[222,736,243],{"class":232},[222,738,739],{"class":224,"line":246},[222,740,250],{"emptyLinePlaceholder":249},[222,742,743],{"class":224,"line":253},[222,744,745],{"class":288},"// 全局处理错误\n",[222,747,748,751,754,757,759,762],{"class":224,"line":285},[222,749,750],{"class":228},"const",[222,752,753],{"class":312}," app",[222,755,756],{"class":228}," =",[222,758,298],{"class":228},[222,760,761],{"class":259}," H3",[222,763,374],{"class":232},[222,765,766,769,772,775,777,779],{"class":224,"line":292},[222,767,768],{"class":259},"  onError",[222,770,771],{"class":232},": (",[222,773,774],{"class":272},"error",[222,776,276],{"class":232},[222,778,279],{"class":228},[222,780,282],{"class":232},[222,782,783,786,788],{"class":224,"line":319},[222,784,785],{"class":232},"    console.",[222,787,774],{"class":259},[222,789,790],{"class":232},"(error);\n",[222,792,793],{"class":224,"line":324},[222,794,795],{"class":232},"  },\n",[222,797,798],{"class":224,"line":330},[222,799,456],{"class":232},[191,801,802,803,808],{},"使用 ",[195,804,805,807],{"href":29},[203,806,717],{}," 中间件"," 来捕获错误。",[213,810,812],{"className":215,"code":811,"language":217,"meta":218,"style":218},"import { onError } from \"h3\";\n\n// 使用中间件处理错误\napp.use(\n  onError(event, (event, error) => {\n    console.error(error);\n  }),\n);\n",[203,813,814,827,831,836,846,865,873,878],{"__ignoreMap":218},[222,815,816,818,821,823,825],{"class":224,"line":225},[222,817,229],{"class":228},[222,819,820],{"class":232}," { onError } ",[222,822,236],{"class":228},[222,824,240],{"class":239},[222,826,243],{"class":232},[222,828,829],{"class":224,"line":246},[222,830,250],{"emptyLinePlaceholder":249},[222,832,833],{"class":224,"line":253},[222,834,835],{"class":288},"// 使用中间件处理错误\n",[222,837,838,840,843],{"class":224,"line":285},[222,839,256],{"class":232},[222,841,842],{"class":259},"use",[222,844,845],{"class":232},"(\n",[222,847,848,850,853,855,857,859,861,863],{"class":224,"line":292},[222,849,768],{"class":259},[222,851,852],{"class":232},"(event, (",[222,854,273],{"class":272},[222,856,345],{"class":232},[222,858,774],{"class":272},[222,860,276],{"class":232},[222,862,279],{"class":228},[222,864,282],{"class":232},[222,866,867,869,871],{"class":224,"line":319},[222,868,785],{"class":232},[222,870,774],{"class":259},[222,872,790],{"class":232},[222,874,875],{"class":224,"line":324},[222,876,877],{"class":232},"  }),\n",[222,879,880],{"class":224,"line":330},[222,881,351],{"class":232},[689,883,884],{},[191,885,886,887,889],{},"\n使用嵌套应用时，子应用的全局钩子不会被调用，因此最好使用 ",[203,888,717],{}," 中间件。",[891,892,893],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":218,"searchDepth":246,"depth":246,"links":895},[896,900,901],{"id":201,"depth":246,"text":205,"children":897},[898],{"id":553,"depth":253,"text":899},"HTTPError 字段",{"id":614,"depth":246,"text":614},{"id":708,"depth":246,"text":708},"通过抛出 HTTPError 来发送错误。","md",{"icon":46},{"icon":46},{"title":43,"description":902},"bta3SxheF-8kx2lad52K_AqwvlQgUDxa3NSh_Ls45ps",[909,911],{"title":38,"path":39,"stem":40,"description":910,"icon":41,"children":-1},"H3 会自动将任何返回值转换为 web 响应。",{"title":48,"path":49,"stem":50,"description":912,"icon":51,"children":-1},"H3 具有一个原生的 mount 方法，用于将嵌套的子应用添加到主实例中。",1757861511625]