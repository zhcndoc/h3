[{"data":1,"prerenderedAt":878},["ShallowReactive",2],{"navigation":3,"-guide":185,"-guide-surround":874},[4,91,133,161,168],{"title":5,"path":6,"stem":7,"children":8,"icon":90},"Guide","/guide","1.guide/0.index",[9,12,53,69],{"title":10,"path":6,"stem":7,"icon":11},"入门指南","pixel:play",{"title":5,"icon":13,"path":14,"stem":15,"children":16,"page":52},"ph:book-open-duotone","/guide/basics","1.guide/1.basics",[17,22,27,32,37,42,47],{"title":18,"path":19,"stem":20,"icon":21},"请求生命周期","/guide/basics/lifecycle","1.guide/1.basics/1.lifecycle","icon-park-outline:handle-round",{"title":23,"path":24,"stem":25,"icon":26},"路由","/guide/basics/routing","1.guide/1.basics/2.routing","solar:routing-bold",{"title":28,"path":29,"stem":30,"icon":31},"中间件","/guide/basics/middleware","1.guide/1.basics/3.middleware","mdi:middleware-outline",{"title":33,"path":34,"stem":35,"icon":36},"事件处理器","/guide/basics/handler","1.guide/1.basics/4.handler","mdi:function",{"title":38,"path":39,"stem":40,"icon":41},"发送响应","/guide/basics/response","1.guide/1.basics/5.response","tabler:json",{"title":43,"path":44,"stem":45,"icon":46},"错误处理","/guide/basics/error","1.guide/1.basics/6.error","tabler:error-404",{"title":48,"path":49,"stem":50,"icon":51},"嵌套应用","/guide/basics/nested-apps","1.guide/1.basics/7.nested-apps","material-symbols-light:layers-outline",false,{"title":54,"icon":55,"path":56,"stem":57,"children":58,"page":52},"API","material-symbols-light:api-rounded","/guide/api","1.guide/900.api",[59,64],{"title":60,"path":61,"stem":62,"icon":63},"H3","/guide/api/h3","1.guide/900.api/1.h3","material-symbols:bolt-rounded",{"title":65,"path":66,"stem":67,"icon":68},"H3Event","/guide/api/h3event","1.guide/900.api/2.h3event","material-symbols:data-object-rounded",{"title":70,"icon":71,"path":72,"stem":73,"children":74,"page":52},"Advanced","hugeicons:more-01","/guide/advanced","1.guide/901.advanced",[75,80,85],{"title":76,"path":77,"stem":78,"icon":79},"Plugins","/guide/advanced/plugins","1.guide/901.advanced/1.plugins","clarity:plugin-line",{"title":81,"path":82,"stem":83,"icon":84},"WebSockets","/guide/advanced/websocket","1.guide/901.advanced/2.websocket","hugeicons:live-streaming-02",{"title":86,"path":87,"stem":88,"icon":89},"每夜构建","/guide/advanced/nightly","1.guide/901.advanced/9.nightly","game-icons:barn-owl","i-ph:book-open-duotone",{"title":92,"path":93,"stem":94,"children":95,"icon":97},"H3 工具集","/utils","2.utils/0.index",[96,98,103,108,113,118,123,128],{"title":92,"path":93,"stem":94,"icon":97},"ph:function-bold",{"title":99,"path":100,"stem":101,"icon":102},"请求","/utils/request","2.utils/1.request","material-symbols-light:input",{"title":104,"path":105,"stem":106,"icon":107},"响应","/utils/response","2.utils/2.response","material-symbols-light:output",{"title":109,"path":110,"stem":111,"icon":112},"Cookie","/utils/cookie","2.utils/3.cookie","material-symbols:cookie-outline",{"title":114,"path":115,"stem":116,"icon":117},"安全","/utils/security","2.utils/4.security","wpf:key-security",{"title":119,"path":120,"stem":121,"icon":122},"代理","/utils/proxy","2.utils/5.proxy","arcticons:super-proxy",{"title":124,"path":125,"stem":126,"icon":127},"更多工具","/utils/more","2.utils/9.more","mingcute:plus-line",{"title":129,"path":130,"stem":131,"icon":132},"社区","/utils/community","2.utils/99.community","lets-icons:external",{"title":134,"path":135,"stem":136,"children":137,"icon":139},"示例","/examples","4.examples/0.index",[138,140,145,149,153,157],{"title":134,"path":135,"stem":136,"icon":139},"ph:code",{"title":141,"path":142,"stem":143,"icon":144},"Cookies","/examples/handle-cookie","4.examples/handle-cookie","ph:arrow-right",{"title":146,"path":147,"stem":148,"icon":144},"会话","/examples/handle-session","4.examples/handle-session",{"title":150,"path":151,"stem":152,"icon":144},"静态资源","/examples/serve-static-assets","4.examples/serve-static-assets",{"title":154,"path":155,"stem":156,"icon":144},"流式响应","/examples/stream-response","4.examples/stream-response",{"title":158,"path":159,"stem":160,"icon":144},"验证数据","/examples/validate-data","4.examples/validate-data",{"title":162,"path":163,"stem":164,"children":165,"icon":167},"从 v1 到 v2 的迁移指南","/migration","5.migration/0.index",[166],{"title":162,"path":163,"stem":164,"icon":167},"icons8:up-round",{"title":169,"path":170,"stem":171,"children":172,"page":-1},"Blog","/blog","99.blog",[173,177,181],{"title":174,"path":170,"stem":175,"icon":176},"博客","99.blog/index","i-lucide-file-text",{"title":178,"path":179,"stem":180,"icon":176},"H3 1.8 - 迈向 Web 的边缘","/blog/v1.8","99.blog/1.v1.8",{"title":182,"path":183,"stem":184,"icon":176},"H3 v2 测试版","/blog/v2-beta","99.blog/2.v2-beta",{"id":186,"title":10,"body":187,"description":868,"extension":869,"meta":870,"navigation":871,"path":6,"seo":872,"stem":7,"__hash__":873},"content/1.guide/0.index.md",{"type":188,"value":189,"toc":862,"icon":11},"minimark",[190,209,213,244,255,268,274,278,281,293,301,305,308,419,422,480,483,487,490,500,520,540,547,593,595,603,605,614,631,660,670,673,781,787,858],[191,192,193],"important",{},[194,195,196,197,201,202,208],"p",{},"\n您当前正在阅读 H3 版本 2 (",[198,199,200],"a",{"href":183},"beta",") 文档。请查看 ",[198,203,207],{"href":204,"rel":205},"https://v1.h3.dev/",[206],"nofollow","v1.h3.dev"," 以获取旧版文档。",[210,211,212],"h2",{"id":212},"概览",[194,214,215,216,221,222,221,227,232,233,238,239,243],{},"⚡ H3（简称 H(TTP)，发音为 /eɪtʃθriː/，类似 h-3）是一个轻量、快速、可组合的服务器框架，适用于现代 JavaScript 运行时。它基于网页标准原语，如 ",[198,217,220],{"href":218,"rel":219},"https://developer.mozilla.org/en-US/docs/Web/API/Request",[206],"Request","、",[198,223,226],{"href":224,"rel":225},"https://developer.mozilla.org/en-US/docs/Web/API/Response",[206],"Response",[198,228,231],{"href":229,"rel":230},"https://developer.mozilla.org/en-US/docs/Web/API/URL",[206],"URL"," 和 ",[198,234,237],{"href":235,"rel":236},"https://developer.mozilla.org/en-US/docs/Web/API/Headers",[206],"Headers","。你可以将 H3 集成到任何兼容的运行时，或者将其他支持 web 的处理器",[198,240,242],{"href":241},"/guide/api/h3#h3mount","挂载","到 H3，几乎不会带来额外延迟。",[194,245,246,247,250,251,254],{},"H3 设计为可扩展且可组合。它不提供一个庞大的核心，而是从一个轻量的 ",[198,248,249],{"href":61},"H3 实例"," 开始，然后导入内置的、支持摇树优化的 ",[198,252,253],{"href":93},"实用工具","，或者自定义引入更多功能。\n可组合工具拥有多个优点：",[256,257,258,262,265],"ul",{},[259,260,261],"li",{},"服务器只包含使用到的代码，并在需要的位置运行。",[259,263,264],{},"应用体积可更好地扩展。工具使用显式且清晰，减少全局影响。",[259,266,267],{},"H3 采用极简设计，不会限制你的选择。",[194,269,270,271,273],{},"所有实用工具共享一个 ",[198,272,65],{"href":66}," 上下文。",[275,276],"read-more",{"title":277,"to":93},"内置 H3 实用工具",[210,279,280],{"id":280},"快速开始",[282,283,284],"tip",{},[194,285,286,287,292],{},"\n您可以在 ",[198,288,291],{"href":289,"rel":290},"https://stackblitz.com/github/h3js/h3/tree/main/playground?file=server.mjs",[206],"⚡️ Stackblitz"," 上在线尝试 H3。",[194,294,295,296,300],{},"安装 ",[297,298,299],"code",{},"h3"," 作为依赖：",[302,303],"pm-install",{"name":304},"h3@beta",[194,306,307],{},"创建一个新文件作为服务器入口：",[309,310,316],"pre",{"className":311,"code":312,"filename":313,"language":314,"meta":315,"style":315},"language-ts shiki shiki-themes github-light github-dark github-dark","import { H3, serve } from \"h3\";\n\nconst app = new H3().get(\"/\", (event) => \"⚡️ Tadaa!\");\n\nserve(app, { port: 3000 });\n","server.mjs","ts","",[297,317,318,341,348,399,404],{"__ignoreMap":315},[319,320,323,327,331,334,338],"span",{"class":321,"line":322},"line",1,[319,324,326],{"class":325},"so5gQ","import",[319,328,330],{"class":329},"slsVL"," { H3, serve } ",[319,332,333],{"class":325},"from",[319,335,337],{"class":336},"sfrk1"," \"h3\"",[319,339,340],{"class":329},";\n",[319,342,344],{"class":321,"line":343},2,[319,345,347],{"emptyLinePlaceholder":346},true,"\n",[319,349,351,354,358,361,364,368,371,374,377,380,383,387,390,393,396],{"class":321,"line":350},3,[319,352,353],{"class":325},"const",[319,355,357],{"class":356},"suiK_"," app",[319,359,360],{"class":325}," =",[319,362,363],{"class":325}," new",[319,365,367],{"class":366},"shcOC"," H3",[319,369,370],{"class":329},"().",[319,372,373],{"class":366},"get",[319,375,376],{"class":329},"(",[319,378,379],{"class":336},"\"/\"",[319,381,382],{"class":329},", (",[319,384,386],{"class":385},"sQHwn","event",[319,388,389],{"class":329},") ",[319,391,392],{"class":325},"=>",[319,394,395],{"class":336}," \"⚡️ Tadaa!\"",[319,397,398],{"class":329},");\n",[319,400,402],{"class":321,"line":401},4,[319,403,347],{"emptyLinePlaceholder":346},[319,405,407,410,413,416],{"class":321,"line":406},5,[319,408,409],{"class":366},"serve",[319,411,412],{"class":329},"(app, { port: ",[319,414,415],{"class":356},"3000",[319,417,418],{"class":329}," });\n",[194,420,421],{},"然后，使用你喜欢的运行时运行服务器：",[423,424,425,443,463],"code-group",{},[309,426,431],{"className":427,"code":428,"filename":429,"language":430,"meta":315,"style":315},"language-bash shiki shiki-themes github-light github-dark github-dark","node --watch ./server.mjs\n","node","bash",[297,432,433],{"__ignoreMap":315},[319,434,435,437,440],{"class":321,"line":322},[319,436,429],{"class":366},[319,438,439],{"class":356}," --watch",[319,441,442],{"class":336}," ./server.mjs\n",[309,444,447],{"className":427,"code":445,"filename":446,"language":430,"meta":315,"style":315},"deno run -A --watch ./server.mjs\n","deno",[297,448,449],{"__ignoreMap":315},[319,450,451,453,456,459,461],{"class":321,"line":322},[319,452,446],{"class":366},[319,454,455],{"class":336}," run",[319,457,458],{"class":356}," -A",[319,460,439],{"class":356},[319,462,442],{"class":336},[309,464,467],{"className":427,"code":465,"filename":466,"language":430,"meta":315,"style":315},"bun run --watch server.mjs\n","bun",[297,468,469],{"__ignoreMap":315},[319,470,471,473,475,477],{"class":321,"line":322},[319,472,466],{"class":366},[319,474,455],{"class":336},[319,476,439],{"class":356},[319,478,479],{"class":336}," server.mjs\n",[194,481,482],{},"就这样！本地就运行起了一个 Web 服务器。",[299,484,486],{"id":485},"这发生了什么","这发生了什么？",[194,488,489],{},"现在，让我们解析一下这个 hello world 示例。",[194,491,492,493,496,497,499],{},"我们首先用 ",[297,494,495],{},"new H3()"," 创建了一个 ",[198,498,60],{"href":61}," 应用实例：",[309,501,503],{"className":311,"code":502,"language":314,"meta":315,"style":315},"const app = new H3();\n",[297,504,505],{"__ignoreMap":315},[319,506,507,509,511,513,515,517],{"class":321,"line":322},[319,508,353],{"class":325},[319,510,357],{"class":356},[319,512,360],{"class":325},[319,514,363],{"class":325},[319,516,367],{"class":366},[319,518,519],{"class":329},"();\n",[194,521,522,524,525,221,528,531,532,534,535,539],{},[198,523,60],{"href":61}," 是一个小型类，具备",[198,526,527],{"href":24},"匹配路由",[198,529,530],{"href":39},"生成响应","和调用",[198,533,28],{"href":29},"及",[198,536,538],{"href":537},"/guide/api/h3#global-hooks","全局钩子","的能力。",[194,541,542,543,546],{},"接着我们添加了一个路由，用于处理 ",[297,544,545],{},"/"," 路径的 HTTP GET 请求。",[309,548,550],{"className":311,"code":549,"language":314,"meta":315,"style":315},"app.get(\"/\", (event) => {\n  return { message: \"⚡️ Tadaa!\" };\n});\n",[297,551,552,574,588],{"__ignoreMap":315},[319,553,554,557,559,561,563,565,567,569,571],{"class":321,"line":322},[319,555,556],{"class":329},"app.",[319,558,373],{"class":366},[319,560,376],{"class":329},[319,562,379],{"class":336},[319,564,382],{"class":329},[319,566,386],{"class":385},[319,568,389],{"class":329},[319,570,392],{"class":325},[319,572,573],{"class":329}," {\n",[319,575,576,579,582,585],{"class":321,"line":343},[319,577,578],{"class":325},"  return",[319,580,581],{"class":329}," { message: ",[319,583,584],{"class":336},"\"⚡️ Tadaa!\"",[319,586,587],{"class":329}," };\n",[319,589,590],{"class":321,"line":350},[319,591,592],{"class":329},"});\n",[275,594],{"title":23,"to":24},[194,596,597,598,602],{},"我们直接返回了一个对象。H3 会自动将值",[198,599,601],{"href":600},"/guide/basics/response#response-types","转换","为网页响应。",[275,604],{"title":38,"to":39},[194,606,607,608,610,611,613],{},"最后，我们使用 ",[297,609,409],{}," 方法启动服务器监听。利用 ",[297,612,409],{}," 方法，你可以轻松地在多种运行时中启动一个 H3 服务器。",[309,615,619],{"className":616,"code":617,"language":618,"meta":315,"style":315},"language-js shiki shiki-themes github-light github-dark github-dark","serve(app, { port: 3000 });\n","js",[297,620,621],{"__ignoreMap":315},[319,622,623,625,627,629],{"class":321,"line":322},[319,624,409],{"class":366},[319,626,412],{"class":329},[319,628,415],{"class":356},[319,630,418],{"class":329},[282,632,633],{},[194,634,635,637,638,643,644,221,649,232,654,659],{},[297,636,409],{}," 方法由 ",[198,639,642],{"href":640,"rel":641},"https://srvx.h3.dev/",[206],"💥 srvx"," 提供支持，Srvx 是一个基于 Web 标准的运行时无关通用服务器监听器，能无缝兼容 ",[198,645,648],{"href":646,"rel":647},"https://deno.com/",[206],"Deno",[198,650,653],{"href":651,"rel":652},"https://nodejs.org/",[206],"Node.js",[198,655,658],{"href":656,"rel":657},"https://bun.sh/",[206],"Bun","。",[194,661,662,663,669],{},"我们还有 ",[198,664,666],{"href":665},"/guide/api/h3#h3fetch",[297,667,668],{},"app.fetch","，可以直接在任何支持 Web 的运行时中运行 H3 应用，甚至可直接调用进行测试。",[275,671],{"title":672,"to":665},"H3.fetch",[309,674,676],{"className":616,"code":675,"language":618,"meta":315,"style":315},"import { H3, serve } from \"h3\";\n\nconst app = new H3().get(\"/\", () => \"⚡️ Tadaa!\");\n\n// 无需监听即可测试\nconst response = await app.request(\"/\");\nconsole.log(await response.text());\n",[297,677,678,690,694,723,727,733,758],{"__ignoreMap":315},[319,679,680,682,684,686,688],{"class":321,"line":322},[319,681,326],{"class":325},[319,683,330],{"class":329},[319,685,333],{"class":325},[319,687,337],{"class":336},[319,689,340],{"class":329},[319,691,692],{"class":321,"line":343},[319,693,347],{"emptyLinePlaceholder":346},[319,695,696,698,700,702,704,706,708,710,712,714,717,719,721],{"class":321,"line":350},[319,697,353],{"class":325},[319,699,357],{"class":356},[319,701,360],{"class":325},[319,703,363],{"class":325},[319,705,367],{"class":366},[319,707,370],{"class":329},[319,709,373],{"class":366},[319,711,376],{"class":329},[319,713,379],{"class":336},[319,715,716],{"class":329},", () ",[319,718,392],{"class":325},[319,720,395],{"class":336},[319,722,398],{"class":329},[319,724,725],{"class":321,"line":401},[319,726,347],{"emptyLinePlaceholder":346},[319,728,729],{"class":321,"line":406},[319,730,732],{"class":731},"sCsY4","// 无需监听即可测试\n",[319,734,736,738,741,743,746,749,752,754,756],{"class":321,"line":735},6,[319,737,353],{"class":325},[319,739,740],{"class":356}," response",[319,742,360],{"class":325},[319,744,745],{"class":325}," await",[319,747,748],{"class":329}," app.",[319,750,751],{"class":366},"request",[319,753,376],{"class":329},[319,755,379],{"class":336},[319,757,398],{"class":329},[319,759,761,764,767,769,772,775,778],{"class":321,"line":760},7,[319,762,763],{"class":329},"console.",[319,765,766],{"class":366},"log",[319,768,376],{"class":329},[319,770,771],{"class":325},"await",[319,773,774],{"class":329}," response.",[319,776,777],{"class":366},"text",[319,779,780],{"class":329},"());\n",[194,782,783,784,786],{},"你也可以直接从 CDN 导入 ",[297,785,299],{}," 库。此方法适用于 Bun、Deno 及 Cloudflare Workers 等其他运行时。",[309,788,790],{"className":616,"code":789,"language":618,"meta":315,"style":315},"import { H3 } from \"https://esm.sh/h3@beta\";\n\nconst app = new H3().get(\"/\", () => \"⚡️ Tadaa!\");\n\nexport const fetch = app.fetch;\n",[297,791,792,806,810,838,842],{"__ignoreMap":315},[319,793,794,796,799,801,804],{"class":321,"line":322},[319,795,326],{"class":325},[319,797,798],{"class":329}," { H3 } ",[319,800,333],{"class":325},[319,802,803],{"class":336}," \"https://esm.sh/h3@beta\"",[319,805,340],{"class":329},[319,807,808],{"class":321,"line":343},[319,809,347],{"emptyLinePlaceholder":346},[319,811,812,814,816,818,820,822,824,826,828,830,832,834,836],{"class":321,"line":350},[319,813,353],{"class":325},[319,815,357],{"class":356},[319,817,360],{"class":325},[319,819,363],{"class":325},[319,821,367],{"class":366},[319,823,370],{"class":329},[319,825,373],{"class":366},[319,827,376],{"class":329},[319,829,379],{"class":336},[319,831,716],{"class":329},[319,833,392],{"class":325},[319,835,395],{"class":336},[319,837,398],{"class":329},[319,839,840],{"class":321,"line":401},[319,841,347],{"emptyLinePlaceholder":346},[319,843,844,847,850,853,855],{"class":321,"line":406},[319,845,846],{"class":325},"export",[319,848,849],{"class":325}," const",[319,851,852],{"class":356}," fetch",[319,854,360],{"class":325},[319,856,857],{"class":329}," app.fetch;\n",[859,860,861],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}",{"title":315,"searchDepth":343,"depth":343,"links":863},[864,865],{"id":212,"depth":343,"text":212},{"id":280,"depth":343,"text":280,"children":866},[867],{"id":485,"depth":350,"text":486},"开始使用 H3。","md",{"automd":346,"icon":11},{"icon":11},{"title":10,"description":868},"i2MW0YIWbVYRFqZDg8K54Y2NHlnev1pICzy6t8Rc6Mo",[875,876],null,{"title":18,"path":19,"stem":20,"description":877,"icon":21,"children":-1},"H3 将传入的网络请求分派到最终的网络响应。",1757861509248]