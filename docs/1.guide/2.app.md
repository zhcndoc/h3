---
icon: ic:baseline-bolt
---

# H3 åº”ç”¨å®ä¾‹

> H3 åº”ç”¨å®ä¾‹æ˜¯ h3 æœåŠ¡å™¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£å¤„ç†ä¼ å…¥è¯·æ±‚ã€‚

ä½ å¯ä»¥ä½¿ç”¨ `new H3()` åˆ›å»ºä¸€ä¸ªæ–°çš„ h3 åº”ç”¨å®ä¾‹ï¼š

```js [server.mjs]
import { H3 } from "h3";

const app = new H3(/* å¯é€‰é…ç½® */);
```

## H3 åº”ç”¨é€‰é¡¹

åˆå§‹åŒ–åº”ç”¨æ—¶å¯ä»¥ä¼ å…¥å…¨å±€åº”ç”¨é…ç½®ã€‚

**ç¤ºä¾‹ï¼š** åˆ›å»ºä¸€ä¸ªå¯ç”¨è¯¦ç»†æ—¥å¿—çš„åº”ç”¨ã€‚

```js
const app = new H3({ debug: true });
```

### å…¨å±€é’©å­

åˆå§‹åŒ– h3 åº”ç”¨æ—¶ï¼Œå¯ä»¥æ³¨å†Œå…¨å±€é’©å­ï¼š

- `onError`
- `onRequest`
- `onBeforeResponse`

è¿™äº›é’©å­ä¼šåœ¨æ¯æ¬¡è¯·æ±‚æ—¶è°ƒç”¨ï¼Œå¯ç”¨äºä¸ºä½ çš„åº”ç”¨æ·»åŠ å…¨å±€é€»è¾‘ï¼Œå¦‚æ—¥å¿—è®°å½•ã€é”™è¯¯å¤„ç†ç­‰ã€‚

```js
const app = new H3({
  onError: (error) => {
    console.error(error);
  },
  onRequest: (event) => {
    console.log("è¯·æ±‚ï¼š", event.path);
  },
});
```

## H3 åº”ç”¨æ–¹æ³•

### `app.fetch(request, init?)`

ç±»ä¼¼äº [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) çš„ APIï¼Œå…è®¸è¯·æ±‚åº”ç”¨è·¯ç”±ã€‚

è¾“å…¥å¯ä»¥æ˜¯ URLã€ç›¸å¯¹è·¯å¾„æˆ–æ ‡å‡†çš„ [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) å¯¹è±¡ã€‚

è¿”å›çš„å€¼æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) Promiseã€‚

**ç¤ºä¾‹ï¼š**

```ts
const response = await app.fetch("/");

console.log(response, await response.text());
```

### `app.handler(event)`

ä¸€ä¸ªä¸ h3 å…¼å®¹çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œç”¨äºç»„åˆå¤šä¸ª h3 åº”ç”¨å®ä¾‹ã€‚

### `app.on(method, route, handler)`

ä¸ºæŒ‡å®šçš„ HTTP æ–¹æ³•æ³¨å†Œè·¯ç”±å¤„ç†å™¨ã€‚

### `app.[method](route, handler)`

ä¸ºæŒ‡å®šçš„ HTTP æ–¹æ³•æ³¨å†Œè·¯ç”±å¤„ç†å™¨ï¼ˆ`app.on(method, ...)` çš„å¿«æ·æ–¹å¼ï¼‰ã€‚

### `app.all(route, handler)`

ä¸ºæ‰€æœ‰ HTTP æ–¹æ³•æ³¨å†Œè·¯ç”±å¤„ç†ç¨‹åºã€‚

### `app.use(middleware, opts?)`

æ³¨å†Œå…¨å±€ä¸­é—´ä»¶å¤„ç†å™¨ã€‚

### `app.use(middleware, opts?)`

æ³¨å†Œå…¨å±€ä¸­é—´ä»¶å¤„ç†å™¨ã€‚

### `app.use(route, middleware, opts?)`

æ³¨å†Œåœ¨ç‰¹å®šè·¯ç”±ä¸Šè¿è¡Œçš„ä¸­é—´ä»¶å¤„ç†ç¨‹åºã€‚

### `app.mount(base, fetchHandler)`

åœ¨åŸºç¡€ URL ä¸‹æŒ‚è½½ä¸€ä¸ªå…¼å®¹ `.fetch` çš„æœåŠ¡å™¨å®ä¾‹ï¼Œå¦‚ [Hono](https://hono.dev/) æˆ– [Elysia](https://elysiajs.com/)ã€‚

**Example:**

```js
import { H3 } from "h3";
import { Hono } from "hono";
import { Elysia } from "elysia";

const app = new H3()
  .mount(
    "/elysia",
    new Elysia().get("/test", () => "Hello Elysia!"),
  )
  .mount(
    "/hono",
    new Hono().get("/test", (c) => c.text("Hello Hono!")),
  );
```

> [!NOTE]
> åŸºç¡€å‰ç¼€å°†ä»ä¼ é€’ç»™æŒ‚è½½åº”ç”¨çš„ `request.url` ä¸­ç§»é™¤ã€‚

> [!TIP]
> åŒæ ·ï¼Œæ‚¨å¯ä»¥åœ¨ [Hono](https://hono.dev/docs/api/hono#mount) æˆ– [Elysia](https://elysiajs.com/patterns/mount#mount-1) ä¸­æŒ‚è½½ H3 åº”ç”¨ã€‚

## H3 åº”ç”¨å±æ€§

### `app.config`

å…¨å±€ h3 å®ä¾‹é…ç½®ã€‚

### `app.websocket`

å…¼å®¹ [ğŸ”Œ crossws](https://crossws.h3.dev/) çš„ Websocket é’©å­ã€‚