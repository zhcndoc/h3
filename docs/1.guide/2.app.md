---
icon: ic:baseline-bolt
---

# H3 åº”ç”¨å®ä¾‹

> H3 åº”ç”¨å®ä¾‹æ˜¯ h3 æœåŠ¡å™¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£å¤„ç†ä¼ å…¥è¯·æ±‚ã€‚

ä½ å¯ä»¥ä½¿ç”¨ `new H3()` åˆ›å»ºä¸€ä¸ªæ–°çš„ h3 åº”ç”¨å®ä¾‹ï¼š

```js [server.mjs]
import { H3 } from "h3";

const app = new H3(/* å¯é€‰é…ç½® */);
```

## H3 åº”ç”¨é€‰é¡¹

åˆå§‹åŒ–åº”ç”¨æ—¶å¯ä»¥ä¼ å…¥å…¨å±€åº”ç”¨é…ç½®ã€‚

**ç¤ºä¾‹ï¼š** åˆ›å»ºä¸€ä¸ªå¯ç”¨è¯¦ç»†æ—¥å¿—çš„åº”ç”¨ã€‚

```js
const app = new H3({ debug: true });
```

### å…¨å±€é’©å­

åˆå§‹åŒ– h3 åº”ç”¨æ—¶ï¼Œå¯ä»¥æ³¨å†Œå…¨å±€é’©å­ï¼š

- `onError`
- `onRequest`
- `onBeforeResponse`

è¿™äº›é’©å­ä¼šåœ¨æ¯æ¬¡è¯·æ±‚æ—¶è°ƒç”¨ï¼Œå¯ç”¨äºä¸ºä½ çš„åº”ç”¨æ·»åŠ å…¨å±€é€»è¾‘ï¼Œå¦‚æ—¥å¿—è®°å½•ã€é”™è¯¯å¤„ç†ç­‰ã€‚

```js
const app = new H3({
  onError: (error) => {
    console.error(error);
  },
  onRequest: (event) => {
    console.log("è¯·æ±‚ï¼š", event.path);
  },
});
```

## H3 åº”ç”¨æ–¹æ³•

### `app.fetch(request, init?, context?)`

ç±»ä¼¼äº [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) çš„ APIï¼Œå…è®¸è¯·æ±‚åº”ç”¨è·¯ç”±ã€‚

è¾“å…¥å¯ä»¥æ˜¯ URLã€ç›¸å¯¹è·¯å¾„æˆ–æ ‡å‡†çš„ [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) å¯¹è±¡ã€‚

è¿”å›å€¼æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response)ï¼Œæˆ–è€…ä¸€ä¸ªè§£æä¸º Response çš„ Promiseã€‚

**ç¤ºä¾‹ï¼š**

```ts
const response = await app.fetch("/");

console.log(response, await response.text());
```

### `app.handler(event)`

ä¸€ä¸ªå…¼å®¹ h3 çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œç”¨äºç»„åˆå¤šä¸ª h3 åº”ç”¨å®ä¾‹ã€‚

### `app.resolve(method, path)`

é€šè¿‡æ–¹æ³•å’Œè·¯å¾„æ¥è§£æè·¯ç”±å¤„ç†å™¨ï¼Œé€‚ç”¨äºè‡ªå®šä¹‰åœºæ™¯ã€‚

### `app.on(method, route, handler)`

ä¸ºæŒ‡å®šçš„ HTTP æ–¹æ³•æ³¨å†Œè·¯ç”±å¤„ç†å™¨ã€‚

### `app.[method](route, handler)`

ä¸ºæŒ‡å®šçš„ HTTP æ–¹æ³•æ³¨å†Œè·¯ç”±å¤„ç†å™¨ï¼ˆ`app.on(method, ...)` çš„å¿«æ·æ–¹å¼ï¼‰ã€‚

### `app.all(route, handler)`

ä¸ºæ‰€æœ‰ HTTP æ–¹æ³•æ³¨å†Œè·¯ç”±å¤„ç†å™¨ã€‚

### `app.use(handler, opts?)`

æ³¨å†Œå…¨å±€ä¸­é—´ä»¶å¤„ç†å™¨ã€‚

### `app.use(middleware, opts?)`

æ³¨å†Œä¸€ä¸ªè·¯ç”±å…¨å±€ä¸­é—´ä»¶å¤„ç†ç¨‹åºï¼Œå¸¦æœ‰å¯é€‰çš„è‡ªå®šä¹‰åŒ¹é…é€‰é¡¹ã€‚

## H3 åº”ç”¨å±æ€§

### `app.config`

å…¨å±€ h3 å®ä¾‹é…ç½®ã€‚

### `app.websocket`

å…¼å®¹ [ğŸ”Œ crossws](https://crossws.h3.dev/) çš„ Websocket é’©å­ã€‚