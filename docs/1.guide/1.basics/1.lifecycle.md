---
icon: icon-park-outline:handle-round
---

# è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ

> H3 å°†ä¼ å…¥çš„ç½‘ç»œè¯·æ±‚åˆ†æ´¾åˆ°æœ€ç»ˆçš„ç½‘ç»œå“åº”ã€‚

ä»¥ä¸‹æ˜¯ H3 æœåŠ¡å™¨ä¸­ä» HTTP è¯·æ±‚åˆ°è¾¾åˆ°ç”Ÿæˆå“åº”çš„æ•´ä¸ªè¿‡ç¨‹æ¦‚è§ˆã€‚

## 1. ä¼ å…¥è¯·æ±‚

å½“æµè§ˆå™¨æˆ– [fetch()](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) å‘èµ· HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨çš„ fetch å¤„ç†å™¨ä¼šæ¥æ”¶ä¸€ä¸ª [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) å¯¹è±¡ã€‚

```mermaid
%%{init: {'theme':'neutral'}}%%
flowchart LR
  A1["<code>fetch(request)</code>"] --> A2["<code>server.fetch(request)</code>"]

click A2 "/guide/api/h3#h3fetch"
```

> [!TIP]
> â€‹[ğŸ’¥ Srvx](https://srvx.h3.dev) æä¾›ç»Ÿä¸€çš„ `server.fetch` æ¥å£å¹¶å¢åŠ äº† [Node.js å…¼å®¹æ€§](https://srvx.h3.dev/guide/node)ã€‚

## 2. æ¥å—è¯·æ±‚

H3 ä»ä¼ å…¥è¯·æ±‚åˆå§‹åŒ–ä¸€ä¸ª [`H3Event`](/guide/api/h3event) å®ä¾‹ï¼Œè°ƒç”¨ [`onRequest`](/guide/api/h3#global-hooks) å…¨å±€é’©å­ï¼Œæœ€åè°ƒç”¨åˆå§‹åŒ–å¥½çš„äº‹ä»¶çš„ [`H3.handler`](/guide/api/h3#h3handler)ã€‚

```mermaid
%%{init: {'theme':'neutral'}}%%
flowchart LR
  B1["<code>new H3Event(request)</code>"] --> B2["<code>onRequest(event)</code>"] --> B3["<code>h3.handler(event)</code>"]

click B1 "/guide/api/h3event"
click B2 "/guide/api/h3#global-hooks"
click B3 "/guide/api/h3#apphandler"
```

## 3. åˆ†æ´¾è¯·æ±‚

H3 æ ¹æ® `request.url` å’Œ `request.method` [åŒ¹é…è·¯ç”±](/guide/basics/routing)ï¼Œè°ƒç”¨å…¨å±€ [ä¸­é—´ä»¶](/guide/basics/middleware)ï¼Œæœ€ç»ˆè°ƒç”¨åŒ¹é…åˆ°çš„è·¯ç”±å¤„ç†å‡½æ•°å¹¶ä¼ å…¥äº‹ä»¶ã€‚

```mermaid
%%{init: {'theme':'neutral'}}%%
flowchart LR
  C1["[match route]"] --> C2["middlewareA(middlewareB(route.handler(event)))"]

click C1 "/guide/basics/routing"
click C2 "/guide/basics/middleware"
```

> [!TIP]
> ğŸš€ åœ¨å†…éƒ¨ï¼ŒH3 ä½¿ç”¨ srvx çš„ `FastURL` æ›¿ä»£ `new URL(req.url).pathname`ã€‚

## 4. å‘é€å“åº”

H3 å°†è¿”å›çš„å€¼å’Œ [å‡†å¤‡å¥½çš„å¤´éƒ¨ä¿¡æ¯](/guide/basics/response#preparing-response) è½¬æ¢æˆä¸€ä¸ª [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response)ï¼Œè°ƒç”¨ [`onResponse`](/guide/api/h3#global-hooks) å…¨å±€é’©å­ï¼Œæœ€åå°†å“åº”è¿”å›ç»™æœåŠ¡å™¨çš„ fetch å¤„ç†å™¨ã€‚

```mermaid
%%{init: {'theme':'neutral'}}%%
flowchart LR
 D1["Returned Value => Response"] --> D2["<code>onResponse(response)</code>"] --> D3["Response"]

click D1 "/guide/basics/response"
click D2 "/guide/api/h3#global-hooks"
```