---
icon: tabler:json
---

# å‘é€å“åº”

> H3 ä¼šè‡ªåŠ¨å°†ä»»ä½•è¿”å›å€¼è½¬æ¢ä¸º web å“åº”ã€‚

ä» [äº‹ä»¶å¤„ç†å™¨](/guide/basics/handler) è¿”å›çš„å€¼ä¼šè¢« H3 è‡ªåŠ¨è½¬æ¢ä¸º web çš„ [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response)ã€‚

**ç¤ºä¾‹ï¼š** ç®€å•äº‹ä»¶å¤„ç†å‡½æ•°ã€‚

```js
const handler = defineHandler((event) => ({ hello: "world" }));
```

H3 ä¼šæ™ºèƒ½è½¬æ¢è¯¥å¤„ç†å™¨ä¸ºï¼š

```js
const handler = (event) =>
  new Response(JSON.stringify({ hello: "world" }), {
    headers: {
      "content-type": "application/json;charset=UTF-8",
    },
  });
```

> [!TIP]
> ğŸš€ H3 å†…éƒ¨ä½¿ç”¨ srvx çš„ `FastResponse` æ¥ä¼˜åŒ– Node.js è¿è¡Œæ—¶çš„æ€§èƒ½ã€‚

å¦‚æœäº‹ä»¶å¤„ç†å™¨è¿”å›ä¸€ä¸ª [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) æˆ–æ¥æºäº [async å‡½æ•°](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)ï¼ŒH3 ä¼šç­‰å¾…å…¶å®Œæˆåå†å‘é€å“åº”ã€‚

å¦‚æœæŠ›å‡ºé”™è¯¯ï¼ŒH3 ä¼šè‡ªåŠ¨ç”¨é”™è¯¯å¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚

:read-more{to="/guide/basics/error" title="é”™è¯¯å¤„ç†"}

## å‡†å¤‡å“åº”

åœ¨ä¸»å¤„ç†å™¨è¿”å›å“åº”ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨ [`event.res`](/guide/api/h3event#eventres) æ¥å‡†å¤‡å“åº”å¤´å’ŒçŠ¶æ€ã€‚

```js
defineHandler((event) => {
  event.res.status = 200;
  event.res.statusText = "OK";
  event.res.headers.set("Content-Type", "text/html");
  return "<h1>Hello, World</h1>";
});
```

> [!NOTE]
> å¦‚æœç›´æ¥è¿”å›å®Œæ•´çš„ [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response/Response) å¯¹è±¡ï¼Œé¢„è®¾çš„çŠ¶æ€å°†è¢«ä¸¢å¼ƒï¼Œä¸”å“åº”å¤´ä¼šè¢«åˆå¹¶/è¦†ç›–ã€‚å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œå»ºè®®æ­¤æ—¶åªåœ¨æœ€ç»ˆ Response ä¸­è®¾ç½®å¤´ä¿¡æ¯ã€‚

> [!NOTE]
> è‹¥å‘ç”Ÿé”™è¯¯ï¼Œé¢„è®¾çš„çŠ¶æ€å’Œå¤´ä¿¡æ¯å°†è¢«ä¸¢å¼ƒã€‚

## å“åº”ç±»å‹

H3 ä¼šæ™ºèƒ½å°† JavaScript å€¼è½¬æ¢ä¸º web çš„ [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response/Response)ã€‚

### å¯åºåˆ—åŒ–ä¸º JSON çš„å€¼

è¿”å›ä¸€ä¸ªå¯é€šè¿‡ [JSON](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON) åºåˆ—åŒ–çš„å€¼ï¼ˆ**å¯¹è±¡**ã€**æ•°ç»„**ã€**æ•°å­—**æˆ– **å¸ƒå°”å€¼**ï¼‰æ—¶ï¼ŒH3 ä¼šä½¿ç”¨ [JSON.stringify()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) è¿›è¡Œåºåˆ—åŒ–ï¼Œå¹¶ä»¥é»˜è®¤çš„ `application/json` å†…å®¹ç±»å‹å‘é€ã€‚

**ç¤ºä¾‹ï¼š**

```ts
app.get("/", (event) => ({ hello: "world" }));
```

> [!TIP]
> è¿”å›çš„å¯¹è±¡è‹¥å«æœ‰ `.toJSON()` å±æ€§ï¼Œå¯ä»¥è‡ªå®šä¹‰åºåˆ—åŒ–è¡Œä¸ºã€‚è¯¦æƒ…å¯å‚è€ƒ [MDN æ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)ã€‚

### å­—ç¬¦ä¸²

è¿”å›å­—ç¬¦ä¸²æ—¶ï¼Œå†…å®¹ä¼šä½œä¸ºçº¯æ–‡æœ¬ä½“å‘é€ã€‚

> [!NOTE]
> å¦‚æœæœªè®¾ç½® `content-type` å¤´ï¼Œé»˜è®¤ç±»å‹ä¸º `text/plain;charset=UTF-8`ã€‚

**ç¤ºä¾‹ï¼š** å‘é€ HTML å“åº”ã€‚

```ts
app.get("/", (event) => {
  event.res.headers.set("Content-Type", "text/html;charset=UTF-8");
  return "<h1>hello world</h1>";
});
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `html` å·¥å…·ä½œä¸ºå¿«æ·æ–¹å¼ã€‚

```js
import { html } from "h3";

app.get("/", (event) => html(event, "<h1>hello world</h1>"));
```

### `Response`

è¿”å›ä¸€ä¸ª web [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response/Response) å¯¹è±¡æ—¶ï¼Œç›´æ¥å°†å…¶ä½œä¸ºæœ€ç»ˆå“åº”å‘é€ã€‚

**ç¤ºä¾‹ï¼š**

```ts
app.get(
  "/",
  (event) =>
    new Response("Hello, world!", { headers: { "x-powered-by": "H3" } }),
);
```

> [!IMPORTANT]
> å‘é€ `Response` æ—¶ï¼Œä¹‹å‰è®¾ç½®çš„ä»»ä½•é¢„è®¾å¤´ä¿¡æ¯å°†è¢«åˆå¹¶ä¸ºé»˜è®¤å¤´ï¼Œä¸” `event.res.{status,statusText}` ä¼šè¢«å¿½ç•¥ã€‚ä¸ºæ€§èƒ½è€ƒè™‘ï¼Œå»ºè®®åªåœ¨æœ€ç»ˆ `Response` ä¸­è®¾ç½®å¤´ä¿¡æ¯ã€‚

### `ReadableStream` æˆ– `Readable`

è¿”å› [`ReadableStream`](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream) æˆ– Node.js çš„ [`Readable`](https://nodejs.org/api/stream.html#readable-streams) å³ä»¥æµçš„å½¢å¼å‘é€ã€‚

### `ArrayBuffer`ã€`Uint8Array` æˆ– `Buffer`

å‘é€äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚ [ArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)ã€[Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array) æˆ– Node.js [Buffer](https://nodejs.org/api/buffer.html#buffer) å¯¹è±¡ã€‚

`content-length` å¤´ä¼šè¢«è‡ªåŠ¨è®¾ç½®ã€‚

### `Blob`

å‘é€ [`Blob`](https://developer.mozilla.org/en-US/docs/Web/API/Blob) ä½œä¸ºæµã€‚

`Content-type` å’Œ `Content-Length` å¤´ä¼šè¢«è‡ªåŠ¨è®¾ç½®ã€‚

### `File`

å‘é€ [`File`](https://developer.mozilla.org/en-US/docs/Web/API/File) ä½œä¸ºæµã€‚

`Content-type`ã€`Content-Length` å’Œ `Content-Disposition` å¤´ä¼šè¢«è‡ªåŠ¨è®¾ç½®ã€‚

## ç‰¹æ®Šç±»å‹

ä»¥ä¸‹æ˜¯å“åº”ç±»å‹ä¸­ä¸€äº›ä¸å¤ªå¸¸è§çš„å¯èƒ½å€¼ã€‚

### `null` æˆ– `undefined`

å‘é€ä¸€ä¸ªç©ºå“åº”ä½“ã€‚

> [!TIP]
> å¦‚æœäº‹ä»¶å¤„ç†å™¨ä¸­æ²¡æœ‰ä½¿ç”¨ `return` è¯­å¥ï¼Œæ•ˆæœç­‰åŒäº `return undefined`ã€‚

### `Error`

è¿”å›ä¸€ä¸ª [`Error`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error) å®ä¾‹æ—¶ï¼Œå°†å‘é€æ­¤é”™è¯¯ã€‚

> [!IMPORTANT]
> å»ºè®® `throw` å¼‚å¸¸è€Œéç›´æ¥è¿”å›é”™è¯¯å®ä¾‹ï¼Œè¿™æ ·å¯ä»¥åœ¨ä»»ä½•åµŒå¥—å·¥å…·ä¸­æ­£ç¡®ä¼ æ’­ã€‚

:read-more{to="/guide/basics/error" title="é”™è¯¯å¤„ç†"}

### `BigInt`

ä¼šå°† BigInt ç±»å‹å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²åå‘é€ã€‚

> [!NOTE]
> è¿”å› JSON å¯¹è±¡æ—¶ä¸æ”¯æŒ BigInt åºåˆ—åŒ–ï¼Œä½ éœ€è¦è‡ªå·±å®ç° `.toJSON`ã€‚è¯¦æƒ…å¯å‚è€ƒ [MDN æ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)ã€‚

### `Symbol` æˆ– `Function`

**è¿”å› Symbol æˆ– Function çš„è¡Œä¸ºä¸å¯ç¡®å®šã€‚** å½“å‰ H3 ä¼šå‘é€ç±»ä¼¼å­—ç¬¦ä¸²çš„æœªçŸ¥ Symbol å’Œ Function è¡¨ç¤ºï¼Œä½†æœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šæ”¹ä¸ºæŠ›å‡ºé”™è¯¯ã€‚

ä»¥ä¸‹æ˜¯ H3 å†…éƒ¨å·²çŸ¥çš„éƒ¨åˆ† Symbolï¼š

- `Symbol.for("h3.notFound")`ï¼šè¡¨ç¤ºæœªæ‰¾åˆ°è·¯ç”±ï¼Œå°†æŠ›å‡º 404 é”™è¯¯ã€‚
- `Symbol.for("h3.handled")`ï¼šè¡¨ç¤ºè¯·æ±‚å·²è¢«æŸç§æ–¹å¼å¤„ç†ï¼ŒH3 ä¸å†ç»§ç»­ï¼ˆä»… Node.js ç¯å¢ƒï¼‰ã€‚