---
icon: solar:route-linear
---

## æ·»åŠ è·¯ç”±

H3 åº”ç”¨å®ä¾‹å†…ç½®äº†ä¸€ä¸ªè·¯ç”±ç³»ç»Ÿï¼Œç”¨äºæ³¨å†ŒåŒ¹é…å¸¦æœ‰å‚æ•°æˆ–ç‰¹å®š HTTP æ–¹æ³•çš„è·¯ç”±æ¨¡å¼ã€‚

::tip
è·¯ç”±ç”± [ğŸŒ³ rou3](https://github.com/h3js/rou3) æä¾›æ”¯æŒï¼Œå®ƒæ˜¯ä¸€æ¬¾è¶…å¿«ä¸”è½»é‡çš„è·¯ç”±åŒ¹é…å¼•æ“ã€‚
::

**ç¤ºä¾‹ï¼š** æ³¨å†Œä¸€ä¸ªè·¯ç”±ï¼ŒåŒ¹é…ä½¿ç”¨ HTTP **GET** æ–¹æ³•è®¿é—® `/hello` ç«¯ç‚¹çš„è¯·æ±‚ï¼š

```js
// æ–¹æ³•ä¸€ï¼šä½¿ç”¨ app.[method]
app.get("/hello", () => "Hello world!");

// æ–¹æ³•äºŒï¼šä½¿ç”¨ app.on(method)
app.on("GET", "/hello", () => "Hello world!");
```

ä½ å¯ä»¥ä¸ºåŒä¸€è·¯ç”±æ³¨å†Œå¤šä¸ªä¸åŒæ–¹æ³•çš„äº‹ä»¶å¤„ç†å™¨ï¼š

```js
app
  .get("/hello", () => "GET Hello world!")
  .post("/hello", () => "POST Hello world!");
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `app.all` æ–¹æ³•æ³¨å†Œä¸€ä¸ªæ¥å—ä»»ä½• HTTP æ–¹æ³•çš„è·¯ç”±ï¼š

```js
app.all("/hello", (event) => `This is a ${event.req.method} request!`);
```

### è·¯ç”±å‚æ•°

ä½ å¯ä»¥é€šè¿‡ `:` å‰ç¼€æ¥å®šä¹‰è·¯ç”±ä¸­çš„å‚æ•°ï¼š

```js
app.get("/hello/:name", (event) => {
  return `Hello ${event.context.params.name}!`;
});
```

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ`name` å‚æ•°å°†å¯é€šè¿‡ `event.context.params` å¯¹è±¡è®¿é—®ã€‚

å¦‚æœè¯·æ±‚åœ°å€æ˜¯ `/hello/world`ï¼Œäº‹ä»¶å¤„ç†å™¨å°†å“åº” `Hello world!`ã€‚

é™¤äº†å‘½åå‚æ•°ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `*` è¡¨ç¤ºæœªå‘½åä¸”**å¯é€‰**çš„å‚æ•°ï¼š

```js
app.get("/hello/*", (event) => `Hello!`);
```

### é€šé…å‚æ•°

æ·»åŠ  `/hello/:name` è·¯ç”±ä¼šåŒ¹é… `/hello/world` æˆ– `/hello/123`ï¼Œä½†ä¸ä¼šåŒ¹é… `/hello/foo/bar`ã€‚

å¦‚æœä½ éœ€è¦åŒ¹é…å¤šçº§å­è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨ `**` å‰ç¼€ï¼š

```js
app.get("/hello/**", (event) => `Hello ${event.context.params._}!`);
```

è¿™å°†åŒ¹é… `/hello`ã€`/hello/world`ã€`/hello/123`ã€`/hello/world/123` ç­‰ã€‚

> [!NOTE]
> å‚æ•° `_` ä¼šå­˜å‚¨å®Œæ•´çš„é€šé…ç¬¦å†…å®¹ï¼Œä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

## æ·»åŠ ä¸­é—´ä»¶

ä½ å¯ä»¥ä½¿ç”¨ `app.use` å‘åº”ç”¨å®ä¾‹æ³¨å†Œ[ä¸­é—´ä»¶å¤„ç†å™¨](/guide/handler#middleware)ã€‚

**ç¤ºä¾‹ï¼š** æ³¨å†Œå…¨å±€ä¸­é—´ä»¶ï¼Œå¯¹æ¯ä¸ªè·¯ç”±è°ƒç”¨ã€‚

```js
app.use((event) => {
  console.log(event);
});
```

**ç¤ºä¾‹ï¼š** æ³¨å†ŒåŒ¹é…ä»¥ `/blog` å‰ç¼€å¼€å¤´çš„ç‰¹å®šè·¯ç”±ä¸”ä½¿ç”¨ `GET` æ–¹æ³•çš„ä¸­é—´ä»¶ï¼ˆå¦‚ `/blog/`ã€`/blog/world`ã€`/blog/123` ç­‰ï¼‰ã€‚

```js
app.use(
  (event) => {
    console.log(event);
  },
  { route: "/blog/**", method: "GET" },
);
```

ä½ å¯ä»¥å®šä¹‰å¤šä¸ªä¸­é—´ä»¶ã€‚

```js
app.use(() => "First");
app.use(() => "Second");
```

ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨ä¼šè°ƒç”¨äºæ¯ä¸ªè¯·æ±‚ï¼Œä¸”**ç¬¬äºŒä¸ªæ°¸è¿œä¸ä¼šè¢«è°ƒç”¨**ã€‚

ä¸è¿‡ï¼Œå¦‚æœç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨ä¸è¿”å›å“åº”ï¼Œç¬¬äºŒä¸ªä¸­é—´ä»¶æ‰ä¼šè¢«è°ƒç”¨ã€‚è¿™åœ¨å®ç° _ä¸­é—´ä»¶_ æ¨¡å¼æ—¶éå¸¸æœ‰ç”¨ã€‚

```js
app.use((event) => {
  console.log("First");
});

app.use((event) => {
  console.log("Second");
});
```

å¦‚æœæ‰€æœ‰å¤„ç†å™¨éƒ½è¢«è°ƒç”¨ä¸”æ²¡æœ‰è¿”å›å“åº”ï¼Œh3 ä¼šç»§ç»­æ‰§è¡Œä¸»è·¯ç”±å¤„ç†å™¨ã€‚

ä½ ä¹Ÿå¯ä»¥æ³¨å†Œå¸¦æœ‰ `next` å‚æ•°çš„ä¸­é—´ä»¶ï¼Œä»¥æ‹¦æˆªåç»­ä¸­é—´ä»¶æˆ–å¤„ç†å™¨çš„è¿”å›å€¼ï¼š

```js
app.use(async (event, next) => {
  const rawResponse = await next();
  // [æ‹¦æˆªå“åº”]
  return rawResponse;
});
```

ä½ è¿˜å¯ä»¥æ³¨å†ŒåŒ¹é…ç‰¹å®šè¦æ±‚çš„ä¸­é—´ä»¶ï¼š

```js
app.use(
  (event, next) => {
    console.log("[alert] POST è¯·æ±‚è®¿é—® /blog è·¯å¾„ï¼");
  },
  {
    method: "POST",
    route: "/blog/**",
    // match: (event) => event.req.method === "POST", // ä¸ method: "POST" ç­‰ä»·
  },
);
```

åœ¨æ·»åŠ è·¯ç”±æ—¶ï¼Œä½ å¯ä»¥æ³¨å†Œéšè·¯ç”±ä¸€èµ·è¿è¡Œçš„ä¸­é—´ä»¶ï¼š

```js
app.get("/admin", (event) => {}, [auth]);
```